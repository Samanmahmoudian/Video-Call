<!DOCTYPE html>
<html>
<head>
    <title>PeerJS Video Call - Caller</title>
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script>
</head>
<body>
    <h1>Caller</h1>
    <video id="local-video" autoplay playsinline></video>
    <video id="remote-video" autoplay playsinline></video>
    <input type="text" id="callee-id" placeholder="Enter callee ID"/>
    <button onclick="startCall()">Start Call</button>

    <script>
        const peer = new Peer('',{host:'video-call-uylq.onrender.com' , path:'/peerjs', secure:'true'});
        let localStream;

        peer.on('open', id => {
            console.log(id)
        });

        peer.on('call', call => {
            call.answer(localStream);
            call.on('stream', remoteStream => {
                const remoteVideo = document.getElementById('remote-video');
                remoteVideo.srcObject = remoteStream;
            });
        });

        navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {
            localStream = stream;
            const localVideo = document.getElementById('local-video');
            localVideo.srcObject = stream;
        });

        function startCall() {
            const calleeID = document.getElementById('callee-id').value;
            const call = peer.call(calleeID, localStream);
            call.on('stream', remoteStream => {
                const remoteVideo = document.getElementById('remote-video');
                remoteVideo.srcObject = remoteStream;
            });
        }
    </script>
</body>
</html>
